# RUSTの環境構築方法

## ゴール

- rustで開発できる環境を作成する
- rustで「Hello world」を表示する

## 作業環境

- OS: ubuntu(Linux系のOS)

MACでも同様の手順で可能だと思います。知らんけど。

## rustupのインストール

まずはrustの環境構築をするため、rustupというツールを使用します。
rustupを使用することで、rustのバージョン管理やビルドツール等の関連するツール群を簡単に管理する事ができるようになります。

```rustupのインストールコマンド
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

// 3択が出てくるので一番上の1を入力してEnter押下
1) Proceed with standard installation // 標準インストール
2) Customize installation             // インストールするディレクトリ、ツールなどを指定する
3) Cancel installation                // インストールを中止
```

上記コマンドを実行すると以下のようにフォルダが作成されると思います。

```
$HOME
├── .cargo
│   ├── bin       # バイナリが含まれるディレクトリ
│   ├── env       # 設定が書いてあるファイル
│   └── env.fish  # Fishを使っている人用のファイル
```

rustupをインストールしたら、次はインストールしたソースを読み込み、適用させます。

```rustupの読み込み（大体の人はこっち）
source "$HOME/.cargo/env"
```

```rustupの読み込み（Fishを明示的に使う設定した人はこっち）
source "$HOME/.cargo/env.fish"
```

自分がFishを使っているの分からないという人は、上の方のコマンドを実行しておけば大丈夫だと思います。

## rustupの確認

ここまでの手順が正常に行えればrustupが使えるようになっているはずです。
以下のコマンドを使用してrustupのバージョンが出てくるか試してみてください。

```rustupのバージョン確認コマンド
rustup -V
```

「cargo」というrustのビルドツールもインストールされていると思うので、下記コマンドを実行してバージョンが出てくるか確認してみてください。

```cargoのバージョン確認コマンド
cargo -V
```

ここまで確認できれば環境構築は完了です。

## rustプロジェクトの作成

先ほどrustupを使用して様々なツールをインストールしたと思いますが、その中にある「cargo」というrustビルドツールを使用します。

以下のコマンドを入力してください。

```rustプロジェクトの作成
cargo new hello_world --bin
```

「cargo new」コマンドがrustのプロジェクトを作成するコマンドで、「hello_world」がプロジェクト名、「--bin」がオプションになります。

- [cargo newコマンド] --bin
  - バイナリクレート
  - 実行可能なプログラムを作成するためのプロジェクト
- [cargo newコマンド] --lib
  - ライブラリクレート
  - 他のプログラムから使用されるライブラリを作成するためのプロジェクト

最初の内は--libを使うことはほぼないと思います。

cargo new コマンドを使用すると以下のようなディレクトリ構成ができます。

```
hello_world
├── Cargo.toml  # 設定ファイル
└── src
    └── main.rs # プログラムの実行開始地点(エントリーポイント)
```

作成したhello_worldフォルダに移動しましょう。

```
cd hello_world
```

main.rs内に実行するコードを書いていくのですが、デフォルトでは「Hello, world」と文字を表示するだけのコードが書いてあります。

```main.rs
fn main() {
    println!("Hello, world!");
}
```

実際にビルドして実行し、「Hello, world!」が表示されるか試してみましょう。

```
cargo build # ビルドするコマンド
cargo run   # 実際に実行するコマンド（cargo runだけ実行してもビルドされる）
```

ターミナル上に「Hello, world!」が表示されたら成功です！

## 備考：rustupに関して詳しく

rustupを使用する事で便利なツール達をインストールしたり、バージョンを切り替えたりする事ができます。

rustupでインストールするツール達（ツールチェーンと言う）のバージョンに関しては、安定版、最新版、開発中の3種類があります。

- stable
  - (デフォルト)安定したバージョンのツールチェーン
  - 大体の人はこれを設定しておけばOK
- beta
  - 最新バージョンのツールチェーン
  - 次の安定版候補を使用でき、次の新機能や変更点を確認できる
- nightly
  - 絶賛開発中バージョンのツールチェーン
  - 開発に貢献している天才達が使用する

ほぼないとは思いますが、最新バージョンのツールチェーンを使用してみたいという場合には以下のコマンドを使うと変更できます。

```ベータ版のツールチェーンをインストール
rustup install beta
```